version: '3'
services:
    mongo1:
        container_name: mongo1
        image: mongo
        command: mongod --shardsvr --replSet mongors1 --dbpath /data/db --port 27017
        ports:
            - 27017:27017
        expose:
            - "27017"
        environment:
            TERM: xterm
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/data1:/data/db
    mongo2:
        container_name: mongo2
        image: mongo
        command: mongod --shardsvr --replSet mongors1 --dbpath /data/db --port 27017
        ports:
            - 27027:27017
        expose:
            - "27017"
        environment:
            TERM: xterm
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/data2:/data/db
    mongo3:
        container_name: mongo3
        image: mongo
        command: mongod --shardsvr --replSet mongors1 --dbpath /data/db --port 27017
        ports:
            - 27037:27017
        expose:
            - "27017"
        environment:
            TERM: xterm
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/data3:/data/db
    mongo4:
        container_name: mongo4
        image: mongo
        command: mongod --shardsvr --replSet mongors2 --dbpath /data/db --port 27017
        ports:
            - 27047:27017
        expose:
            - "27017"
        environment:
            TERM: xterm
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/data4:/data/db
    mongo5:
        container_name: mongo5
        image: mongo
        command: mongod --shardsvr --replSet mongors2 --dbpath /data/db --port 27017
        ports:
            - 27057:27017
        expose:
            - "27017"
        environment:
            TERM: xterm
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/data5:/data/db
    mongo6:
        container_name: mongo6
        image: mongo
        command: mongod --shardsvr --replSet mongors2 --dbpath /data/db --port 27017
        ports:
            - 27067:27017
        expose:
            - "27017"
        environment:
            TERM: xterm
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/data6:/data/db
    mongocfg1:
        container_name: mongocfg1
        image: mongo
        command: mongod --configsvr --replSet mongors1conf --dbpath /data/db --port 27017
        environment:
            TERM: xterm
        expose:
            - "27017"
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/config1:/data/db
    mongocfg2:
        container_name: mongocfg2
        image: mongo
        command: mongod --configsvr --replSet mongors1conf --dbpath /data/db --port 27017
        environment:
            TERM: xterm
        expose:
            - "27017"
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/config2:/data/db
    mongocfg3:
        container_name: mongocfg3
        image: mongo
        command: mongod --configsvr --replSet mongors1conf --dbpath /data/db --port 27017
        environment:
            TERM: xterm
        expose:
            - "27017"
        volumes:
            - /etc/localtime:/etc/localtime:ro
            - /mongo_cluster/config3:/data/db
    mongos1:
        container_name: mongos1
        image: mongo
        depends_on:
            - mongocfg1
            - mongocfg2
        command: mongos --configdb mongors1conf/mongocfg1:27017,mongocfg2:27017,mongocfg3:27017 --port 27017
        ports:
            - 27019:27017
        expose:
            - "27019"
        volumes:
            - /etc/localtime:/etc/localtime:ro
    mongos1:
        container_name: mongos2
        image: mongo
        depends_on:
            - mongocfg1
            - mongocfg2
        command: mongos --configdb mongors1conf/mongocfg1:27017,mongocfg2:27017,mongocfg3:27017 --port 27017
        ports:
            - 27020:27017
        expose:
            - "27020"
        volumes:
            - /etc/localtime:/etc/localtime:ro
